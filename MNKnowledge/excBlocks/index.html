<html>
<head>
<title>Colored Blocks</title>
<link rel="icon" href="icon.ico">
<script>
window.onload = function(){
	var ctx = document.getElementById("cvs").getContext("2d")
	
	var aColors = ["rgb(255,255,0)", "rgb(237,28,36)", "rgb(0,255,0)"]
	
	var sqSize = 200, tSize = Math.floor(sqSize/8)
	
	var t = new Array(6)
	
	for (let i = 0; i < 6; i++){
		t[i] = new Array(2*i+1)
	}
	
	var x = [0,2,1,2,1,5,3,2,3,7,4,5,4,9,6,5,6,7,6,11,8,7,8,13,10,9,10,11,12,11,12,13,9,13,10,12]

	var a = new Array(12)
	
	function genTable(b, l, r){
		t[0][0]=b[0];			t[1][0]=b[1];			t[1][1]=b[2];			t[1][2]=b[3];			t[2][0]=b[4];			t[2][1]=b[5];
		t[2][2]=b[6];			t[2][3]=b[7];			t[2][4]=b[8];			t[3][0]=(b[8]+l)%3;		t[3][1]=b[9];			t[3][2]=b[10];
		t[3][3]=b[11];			t[3][4]=b[12];			t[3][5]=b[13];			t[3][6]=(b[4]+r)%3;		t[4][0]=(b[3]+l)%3;		t[4][1]=(b[7]+l)%3;
		t[4][2]=(b[6]+l)%3;		t[4][3]=b[12];			t[4][4]=b[11];			t[4][5]=b[10];			t[4][6]=(b[6]+r)%3;		t[4][7]=(b[5]+r)%3;
		t[4][8]=(b[1]+r)%3;		t[5][0]=(b[0]+l)%3;		t[5][1]=(b[2]+l)%3;		t[5][2]=(b[1]+l)%3;		t[5][3]=(b[5]+l)%3;		t[5][4]=(b[4]+l)%3;
		t[5][5]=3-b[9]-b[13];	t[5][6]=(b[8]+r)%3;		t[5][7]=(b[7]+r)%3;		t[5][8]=(b[3]+r)%3;		t[5][9]=(b[2]+r)%3;		t[5][10]=(b[0]+r)%3;
	}
	
	function drawTriangle(x, y, dir, a, clr){
		ctx.beginPath()
		ctx.moveTo(x, y)
		ctx.lineTo(x+a, y)
		ctx.lineTo(x+a/2, y+Math.sqrt(3)*a/2*dir)
		ctx.closePath()
		
		if (clr == "black"){
			ctx.strokeStyle = clr
			ctx.stroke()
		}
		else{
			ctx.fillStyle = clr
			ctx.fill()
		}
	}
	
	function drawBlock(s){
		var oX = sqSize*(s%8)+tSize, oY = sqSize*Math.floor(s/8)+sqSize-2*tSize
		
		drawTriangle(oX, oY, -1, 6*tSize, "black")
		
		for (let i = 5; i >= 0; i--){
			for (let j = 0; j < t[i].length; j++){
				drawTriangle(oX+j/2*tSize, oY-(j%2)*tSize*Math.sqrt(3)/2, -1+2*(j%2), tSize, aColors[t[i][j]])
			}
			
			oX += tSize/2
			oY -= tSize*Math.sqrt(3)/2
		}
	}
	
	var s = 0
	for (let i = 0; i < 531441; i++){
		for (let j = 11, s = i; j >= 0; j--){
			a[j] = s % 3
			s = Math.floor(s/3)
		}
		
		var b = a.slice()
		b.splice(1, 0, 1)
		b.unshift(0)
		
		var k
		for (k = 0; k < x.length; k += 2){
			if (b[x[k]] == b[x[k+1]]){
				break
			}
		}
		
		if (k == x.length){
			if ((b[9]!=(b[8]+1)%3) && (b[13]!=(b[4]+2)%3) && (b[1]!=(b[3]+1)%3) && (b[4]!=(b[8]+1)%3) && (b[9]+b[10]!=b[12]+b[13])){
				genTable(b, 1, 2)
				drawBlock(s)
				s++
			}
			if ((b[9]!=(b[8]+2)%3) && (b[13]!=(b[4]+1)%3) && (b[1]!=(b[3]+2)%3) && (b[4]!=(b[8]+2)%3) && (b[9]+b[10]!=b[12]+b[13])){
				genTable(b, 2, 1)
				drawBlock(s)
				s++
			}
		}
	}
}
</script>
</head>
<body>
<p style="margin-left:50px;">A catalogue with 136 blocks for <a target="_blank" href="https://drive.google.com/file/d/1SyJcSo7hc6KP8YA57icx7Y7vfT3Y__Q5/view">this</a> problem.</p>
<canvas id="cvs" width="1600" height="3400"></canvas>
</body>
</html>
