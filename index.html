<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Lights Out</title>
<link rel="shortcut icon" href="icon.ico">
</head>
<script>
function start(s)
{
 // produce a solvable board
	var b = [];
	for (var i = 0; i < parseInt((s*s)/2); i++) b.push(Math.round(Math.random()));
	var a = (s % 2 == 0 ? b.concat([]):b.concat([Math.round(Math.random())]));
	b.reverse();
	
	a = a.concat(b);
	for (var i = 0; i < s*s; i++) document.getElementById('Button'+i).style.backgroundColor = (a[i] == 1 ? 'rgb(255, 255, 65)':'rgb(232, 132, 192)');
}

function set(x)
{
 // switch the color of a button
	var u = document.getElementById('Button'+x);
	u.style.backgroundColor = (u.style.backgroundColor == 'rgb(255, 255, 65)' ? 'rgb(232, 132, 192)':'rgb(255, 255, 65)');
}

function init_board(s)
{   
 // delete the current board
	var b = document.getElementById('board');
	if (b != null) document.body.removeChild(b);
	
 // create a new board
	var board = document.createElement('div');
	board.id = 'board';
	document.body.appendChild(board);
	
	var sz = parseInt(525/s)-2;
	
	for (var i = 0; i < s*s; i++)(function(x)
	{
	  // create a button on the board
		var btn = document.createElement('input'); btn.type = 'submit'; btn.id = 'Button' + x;	btn.value = '';
		btn.style.cssText = 'position:absolute;left:' + (441 + sz*(x%s)) + 'px;top:' + (28 + sz*(parseInt(x/s))) + 'px;width:' + (sz-2) + 'px;height:' + (sz-2) + 'px;border: 1px #A9A9A9 solid;';
		btn.onclick=function()
		{
			set(x); if (x>s-1) set(x-s); if (x<s*s-s) set(x+s); if (x%s != 0) set(x-1); if (x%s != s-1) set(x+1);
			var p1=true, p2=true;
			for (var j = 0; j < s*s; j++) if (document.getElementById('Button'+j).style.backgroundColor =='rgb(255, 255, 65)') p1 = false; else p2 = false;
			if (p1 || p2) {alert('You win!'); start(s);}
		};
		document.getElementById('board').appendChild(btn);
	})(i);
	
	start(s);
}
</script>
<body onload="init_board(5)">
<input type="submit" id="new_game_5" style="border: 0px #0000FF solid;  background-color: #4169E1; color: #FFFFFF; font-family: 'Comic Sans MS'; font-size: 27px; position: absolute; left: 275px; top: 570px; width: 250px; height: 50px;" value="New Game 5x5" onclick="init_board(5)">
<input type="submit" id="new_game_6" style="border: 0px #0000FF solid;  background-color: #4169E1; color: #FFFFFF; font-family: 'Comic Sans MS'; font-size: 27px; position: absolute; left: 575px; top: 570px; width: 250px; height: 50px;" value="New Game 6x6" onclick="init_board(6)">
<input type="submit" id="new_game_7" style="border: 0px #0000FF solid;  background-color: #4169E1; color: #FFFFFF; font-family: 'Comic Sans MS'; font-size: 27px; position: absolute; left: 875px; top: 570px; width: 250px; height: 50px;" value="New Game 7x7" onclick="init_board(7)">
</body>
</html>